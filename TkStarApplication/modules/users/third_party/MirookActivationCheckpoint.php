<?php
use Cartalyst\Sentinel\Checkpoints\ActivationCheckpoint;
use Cartalyst\Sentinel\Users\UserInterface;
class MirookActivationCheckpoint extends ActivationCheckpoint {
    protected function checkActivation ( UserInterface $user = null ) {
        try {
            parent::checkActivation($user);
        }catch(Exception $e){
            $link = site_url('users/activationEmailSend/' . $user->id . '/resend');
			$message = '&#1575;&#1740;&#1605;&#1740;&#1604; &#1588;&#1605;&#1575; &#1607;&#1606;&#1608;&#1586; &#1578;&#1575;&#1740;&#1740;&#1583; &#1606;&#1588;&#1583;&#1607; &#1575;&#1587;&#1578;. &#1576;&#1585;&#1575;&#1740; &#1601;&#1593;&#1575;&#1604;&#1587;&#1575;&#1586;&#1740; &#1581;&#1587;&#1575;&#1576; &#1705;&#1575;&#1585;&#1576;&#1585;&#1740; &#1576;&#1607; &#1575;&#1740;&#1605;&#1740;&#1604; &#1582;&#1608;&#1583; &#1605;&#1585;&#1575;&#1580;&#1593;&#1607; &#1705;&#1606;&#1740;&#1583; &#1608; &#1585;&#1608;&#1740; &#1604;&#1740;&#1606;&#1705; &#1601;&#1593;&#1575;&#1604;&#1587;&#1575;&#1586;&#1740; &#1705;&#1604;&#1740;&#1705; &#1705;&#1606;&#1740;&#1583;. &#1575;&#1711;&#1585; &#1575;&#1740;&#1605;&#1740;&#1604; &#1576;&#1585;&#1575;&#1740; &#1588;&#1605;&#1575; &#1575;&#1585;&#1587;&#1575;&#1604; &#1606;&#1588;&#1583;&#1607; &#1575;&#1587;&#1578; &#1585;&#1608;&#1740; <a style="color: lightgreen !important;" href="' . $link . '" target="_self">&#1575;&#1740;&#1606; &#1604;&#1740;&#1606;&#1705;</a> &#1705;&#1604;&#1740;&#1705; &#1705;&#1606;&#1740;&#1583;';
            $CI = &get_instance();
            $CI->message->set_message($message, 'fail', '&#1608;&#1585;&#1608;&#1583;', 'users/login')->redirect();
        }
    }
}
?>